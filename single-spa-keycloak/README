Functional : objective of the POC ( 3 days )

1. a microfront end application having 3 pages 
--> a login page 
--> a home page ( a protected page) 
    --> log out from home page ----------------------------------- TODO
--> a my account page ( a protected page )
--> a registration page ( a non protected page )
--> an error page ----------------------------------- TODO

2. a BFF layer using graphql and rest based APIs 

--> a protected API 
--> a non protected API 
--> a shielded API ----------------------------------- TODO


Step 1 
we will be using keycloak for the login 

Step 2 
we will be using Microsoft AD as well  ----------------------------------- TODO 

Step 3 
we will try to validate the SSO in jboss ----------------------------------- TODO

Architecture : objective of the POCs 

Use hashed urls in the application ---------------- Done 
Use a shared micro front end ----------------------------------- Descoped 
Check root config can access this shared microfront end ----------------------------------- Descoped 



Landing page urls  ( modified )

http://localhost:9000/#/login

--> /#/login 
--> /app/home
--> /app/my-account
--> /register 

login-app ( done )
home-app ( done )
myaccount-app ( done )
registration-app ( done )


ports

root-config ( 9000 )
login-app ( 8500 )
home-app ( 8600 )
myaccount-app ( 8700 )
registration-app ( 8800 )

Setup commands 

npm install ( run separately )

execute start-everyone.bat to run all mfes 


create realm 
create client 
add user 




Do business login ----------------------------------- done 
Do token refresh ----------------------------------- TODO 

user accesses the root-config MFE 

root-config authenticates the user with keycloak and redirect back to the root-config after authentication 

access token and refresh token are kept in the global scope and will have a validity of 5 mins 

root-config upon checking the authentication will do a business login 

after the business login then navigate the user to home mfe 

user takes some microfrontend 

user makes an API call from the microfront end to back end and sends the access_token to it 

bff will convert the access_token to the business_token to make api calls from there


Handling the access_token expiry 

    > before making any api calls we should check the access_token and should renew it